apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: keycloak-auth
  namespace: kube-system
spec:
  plugin:
    keycloakopenid:
      KeycloakURL: "https://keycloak.example.com"
      ClientID: "traefik-oidc"
      ClientSecret: "CHANGEME_TRAEFIK_OIDC_CLIENT_SECRET"
      KeycloakRealm: "CHANGEME_KC_REALM"
      Scope: "openid profile email"
      TokenCookieName: "KUBESYSTEM_TOKEN"
      UserClaimName: "preferred_username"
      UserHeaderName: "X-Forwarded-User"
