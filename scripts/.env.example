# RKE2 Cluster Deployment Configuration
# =======================================
# Copy to scripts/.env and customize, OR leave empty to auto-generate.
# deploy-cluster.sh will generate random values for any unset variables.
#
# Usage:
#   cp scripts/.env.example scripts/.env
#   # Edit values as needed (or leave blank for auto-generation)
#   ./scripts/deploy-cluster.sh

# ---- Domain Configuration ----
# Root domain for all service FQDNs (e.g., vault.DOMAIN, harbor.DOMAIN)
# Defaults to "example.com" if left empty
DOMAIN=""

# Organization name for PKI CA Common Names (e.g., "Example Org", "Tiger Inc")
# Auto-derived from DOMAIN if empty (example.com → "Example Org")
ORG_NAME=""

# Keycloak realm name (auto-derived from DOMAIN if empty: example.com → "example")
KC_REALM=""

# Git repo URL for ArgoCD bootstrap (default: git@gitlab.${DOMAIN}:infrastructure/rke2-cluster.git)
GIT_REPO_URL=""

# ---- Feature Flags ----
# Uptime Kuma status page (default: enabled)
DEPLOY_UPTIME_KUMA="true"

# LibreNMS network monitoring (default: disabled — requires MariaDB Operator)
DEPLOY_LIBRENMS="false"

# ---- Cloud-Init Override ----
# Optional paths to custom cloud-init YAML files for Terraform.
# Leave empty to use the built-in templates in machine_config.tf.
# Paths are relative to the cluster/ directory or absolute.
USER_DATA_CP_FILE=""
USER_DATA_WORKER_FILE=""

# ---- Credentials ----
# Keycloak bootstrap client secret (used for initial realm setup)
KEYCLOAK_BOOTSTRAP_CLIENT_SECRET=""

# Keycloak PostgreSQL password
KEYCLOAK_DB_PASSWORD=""

# Mattermost PostgreSQL password
MATTERMOST_DB_PASSWORD=""

# Mattermost MinIO credentials
MATTERMOST_MINIO_ROOT_USER=""
MATTERMOST_MINIO_ROOT_PASSWORD=""

# Harbor Redis/Valkey password
HARBOR_REDIS_PASSWORD=""

# Grafana admin password
GRAFANA_ADMIN_PASSWORD=""

# Basic-auth password for Prometheus, Hubble, Rollouts dashboards
BASIC_AUTH_PASSWORD=""

# htpasswd hash (auto-generated from BASIC_AUTH_PASSWORD if empty)
# Format: admin:$2y$05$...
BASIC_AUTH_HTPASSWD=""

# LibreNMS credentials (only needed if DEPLOY_LIBRENMS=true)
LIBRENMS_DB_PASSWORD=""
LIBRENMS_VALKEY_PASSWORD=""

# Harbor admin + storage passwords
HARBOR_ADMIN_PASSWORD=""
HARBOR_MINIO_SECRET_KEY=""
HARBOR_DB_PASSWORD=""

# Kasm Workspaces PostgreSQL passwords
KASM_PG_SUPERUSER_PASSWORD=""
KASM_PG_APP_PASSWORD=""

# Keycloak bootstrap admin password
KC_ADMIN_PASSWORD=""

# ---- External Services ----
# GitLab API token (optional — for automated deploy key setup)
GITLAB_API_TOKEN=""
